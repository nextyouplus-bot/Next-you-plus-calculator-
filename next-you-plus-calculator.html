<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Next You+ | Maintenance & Macros Calculator</title>
<style>
  :root{
    --ny-blue:#2563eb; /* Next You+ blue */
    --ny-grey:#6b7280; /* grey-500 */
    --ny-bg:#f8fafc;   /* slate-50 */
    --ny-card:#ffffff; /* white */
  }
  *{box-sizing:border-box;font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Helvetica,Arial,sans-serif}
  body{margin:0;background:var(--ny-bg);color:#0f172a}
  .wrap{max-width:920px;margin:32px auto;padding:20px}
  .brand{
    display:flex;align-items:center;gap:12px;margin-bottom:18px;
  }
  .logo{
    width:40px;height:40px;border-radius:10px;
    background:linear-gradient(135deg,var(--ny-blue),#60a5fa);
    display:flex;align-items:center;justify-content:center;color:white;
    font-weight:800;letter-spacing:0.5px;
  }
  h1{margin:0;font-size:clamp(20px,4vw,28px);}
  .sub{color:var(--ny-grey);font-size:14px;margin-top:4px}
  .card{
    background:var(--ny-card);border:1px solid #e5e7eb;border-radius:14px;
    padding:18px;margin-top:18px;box-shadow:0 6px 24px rgba(15,23,42,0.05);
  }
  .grid{display:grid;grid-template-columns:1fr 1fr;gap:14px}
  @media (max-width:700px){.grid{grid-template-columns:1fr}}
  label{font-size:12px;color:#334155;margin-bottom:6px;display:block}
  input,select{
    width:100%;padding:12px;border:1px solid #cbd5e1;border-radius:10px;font-size:14px;background:white
  }
  .row{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
  .chip{
    border:1px solid #cbd5e1;padding:8px 12px;border-radius:999px;font-size:13px;cursor:pointer;
  }
  .chip input{margin-right:6px}
  .btn{
    background:var(--ny-blue);color:white;border:none;border-radius:10px;padding:12px 16px;
    font-weight:600;font-size:14px;cursor:pointer
  }
  .btn:disabled{opacity:.5;cursor:not-allowed}
  .muted{color:var(--ny-grey);font-size:13px}
  .result{
    display:grid;grid-template-columns:1fr 1fr;gap:14px;margin-top:12px
  }
  @media (max-width:700px){.result{grid-template-columns:1fr}}
  .pill{
    padding:12px;border:1px dashed #cbd5e1;border-radius:12px;background:#f1f5f9
  }
  .kpi{
    background:#eef2ff;border:1px solid #c7d2fe;border-radius:12px;padding:14px
  }
  .kpi h3{margin:0 0 6px 0;font-size:15px}
  .kpi p{margin:0;font-size:24px;font-weight:800;color:#111827}
  .footer{margin-top:14px;font-size:12px;color:#64748b}
  .small{font-size:12px}
</style>
</head>
<body>
  <div class="wrap">
    <div class="brand">
      <div class="logo">NY+</div>
      <div>
        <h1>Next You+ Maintenance & Macro Calculator</h1>
        <div class="sub">Mifflin–St Jeor • Activity multipliers • Goal presets • Macro breakdown</div>
      </div>
    </div>

    <div class="card">
      <div class="grid">
        <div>
          <label for="unit">Units</label>
          <select id="unit">
            <option value="imperial">Imperial (lb / ft / in)</option>
            <option value="metric">Metric (kg / cm)</option>
          </select>
        </div>
        <div>
          <label for="sex">Sex</label>
          <select id="sex">
            <option value="male">Male</option>
            <option value="female">Female</option>
          </select>
        </div>

        <div>
          <label for="age">Age</label>
          <input id="age" type="number" min="10" max="100" value="28" />
        </div>

        <div id="imperial-ht" class="grid">
          <div>
            <label for="height_ft">Height (ft)</label>
            <input id="height_ft" type="number" min="3" max="8" value="6"/>
          </div>
          <div>
            <label for="height_in">Height (in)</label>
            <input id="height_in" type="number" min="0" max="11" value="1"/>
          </div>
        </div>
        <div id="metric-ht" style="display:none;">
          <label for="height_cm">Height (cm)</label>
          <input id="height_cm" type="number" min="120" max="220" value="186"/>
        </div>

        <div>
          <label for="weight">Weight (<span id="wlabel">lb</span>)</label>
          <input id="weight" type="number" min="60" max="400" value="215"/>
        </div>

        <div>
          <label for="activity">Activity Level</label>
          <select id="activity">
            <option value="1.2">Sedentary (little or no exercise)</option>
            <option value="1.375">Light (1–3 days/week)</option>
            <option value="1.55" selected>Moderate (3–5 days/week)</option>
            <option value="1.725">Very active (6–7 days/week)</option>
            <option value="1.9">Extra active (manual labor + training)</option>
          </select>
        </div>

        <div>
          <label>Goal</label>
          <div class="row small">
            <label class="chip"><input type="radio" name="goal" value="maintain" checked/>Maintain</label>
            <label class="chip"><input type="radio" name="goal" value="cut"/>Fat Loss (~-15%)</label>
            <label class="chip"><input type="radio" name="goal" value="gain"/>Muscle Gain (~+10%)</label>
            <label class="chip"><input type="radio" name="goal" value="custom"/>Custom</label>
          </div>
          <div class="row" id="customRow" style="display:none;margin-top:10px;">
            <label class="small">Custom Calorie Offset (%): <input id="customOffset" type="number" value="0" style="width:100px;margin-left:6px"/></label>
          </div>
        </div>

        <div>
          <label>Protein target</label>
          <div class="row small">
            <label class="chip"><input type="radio" name="pt" value="1.0" checked/>1.0 g/lb</label>
            <label class="chip"><input type="radio" name="pt" value="0.8"/>0.8 g/lb</label>
            <label class="chip"><input type="radio" name="pt" value="1.1"/>1.1 g/lb</label>
            <label class="chip"><input type="radio" name="pt" value="custom"/>Custom</label>
          </div>
          <div class="row" id="customProtRow" style="display:none;margin-top:10px;">
            <label class="small">Custom g per lb: <input id="customProt" type="number" value="1.0" step="0.05" style="width:100px;margin-left:6px"/></label>
          </div>
        </div>

        <div>
          <label for="fatPerLb">Fat minimum (g per lb)</label>
          <input id="fatPerLb" type="number" value="0.35" step="0.05" />
          <div class="muted">Common range: 0.3–0.4 g/lb</div>
        </div>
      </div>

      <div class="row" style="margin-top:14px">
        <button class="btn" id="calcBtn">Calculate</button>
        <span class="muted">Results update instantly</span>
      </div>

      <div class="result">
        <div class="kpi">
          <h3>Estimated Maintenance Calories</h3>
          <p id="kcal">—</p>
          <div class="small muted" id="bmrLine">BMR: — • Activity: —</div>
        </div>
        <div class="kpi">
          <h3>Target Calories</h3>
          <p id="target">—</p>
          <div class="small muted" id="goalLine">Goal: —</div>
        </div>
      </div>

      <div class="card" style="margin-top:16px">
        <div class="grid">
          <div class="pill">
            <strong>Protein</strong>
            <div id="pGr">— g</div>
            <div class="small muted" id="pKcal">— kcal</div>
          </div>
          <div class="pill">
            <strong>Fat</strong>
            <div id="fGr">— g</div>
            <div class="small muted" id="fKcal">— kcal</div>
          </div>
          <div class="pill">
            <strong>Carbs</strong>
            <div id="cGr">— g</div>
            <div class="small muted" id="cKcal">— kcal</div>
          </div>
          <div class="pill">
            <strong>Fiber (suggested)</strong>
            <div id="fiGr">— g</div>
            <div class="small muted">~14 g per 1,000 kcal</div>
          </div>
        </div>
      </div>

      <div class="footer">
        * Uses Mifflin–St Jeor. Macros set as: Protein based on g/lb, Fat at minimum chosen, Carbs are remainder. 
        For metric users, protein uses 2.2× kg to derive g/lb equivalent.
      </div>
    </div>
  </div>

<script>
  const unitSel = document.getElementById('unit');
  const sexSel = document.getElementById('sex');
  const ageEl = document.getElementById('age');
  const hft = document.getElementById('height_ft');
  const hin = document.getElementById('height_in');
  const hcm = document.getElementById('height_cm');
  const impHt = document.getElementById('imperial-ht');
  const metHt = document.getElementById('metric-ht');
  const wLabel = document.getElementById('wlabel');
  const weightEl = document.getElementById('weight');
  const actSel = document.getElementById('activity');
  const calcBtn = document.getElementById('calcBtn');
  const kcalEl = document.getElementById('kcal');
  const bmrLine = document.getElementById('bmrLine');
  const targetEl = document.getElementById('target');
  const goalLine = document.getElementById('goalLine');
  const customRow = document.getElementById('customRow');
  const customOffset = document.getElementById('customOffset');
  const customProtRow = document.getElementById('customProtRow');
  const customProt = document.getElementById('customProt');
  const pGr = document.getElementById('pGr'); const pKcal = document.getElementById('pKcal');
  const fGr = document.getElementById('fGr'); const fKcal = document.getElementById('fKcal');
  const cGr = document.getElementById('cGr'); const cKcal = document.getElementById('cKcal');
  const fiGr = document.getElementById('fiGr');

  function fmt(n){ return Math.round(n).toLocaleString(); }
  function getGoal(){
    const val = document.querySelector('input[name="goal"]:checked').value;
    if(val==='cut') return -15;
    if(val==='gain') return 10;
    if(val==='custom') return parseFloat(customOffset.value||0);
    return 0;
  }
  function getProtPerLb(){
    const v = document.querySelector('input[name="pt"]:checked').value;
    if(v==='custom') return parseFloat(customProt.value||1.0);
    return parseFloat(v);
  }
  function toggleUnits(){
    if(unitSel.value==='metric'){
      impHt.style.display='none'; metHt.style.display='block'; wLabel.textContent='kg';
      // convert values roughly to kg/cm
      try{
        const ft = parseFloat(hft.value)||0; const inch = parseFloat(hin.value)||0;
        const totalIn = ft*12 + inch; const cm = totalIn*2.54;
        const lb = parseFloat(weightEl.value)||0; const kg = lb*0.453592;
        hcm.value = Math.round(cm); weightEl.value = Math.round(kg);
      }catch(e){}
    }else{
      impHt.style.display='grid'; metHt.style.display='none'; wLabel.textContent='lb';
      // convert to imperial if possible
      try{
        const cm = parseFloat(hcm.value)||0; const totalIn = cm/2.54;
        const ft = Math.floor(totalIn/12); const inch = Math.round(totalIn%12);
        hft.value = ft; hin.value = inch;
        const kg = parseFloat(weightEl.value)||0; const lb = kg/0.453592;
        weightEl.value = Math.round(lb);
      }catch(e){}
    }
  }
  unitSel.addEventListener('change', toggleUnits);

  document.querySelectorAll('input[name="goal"]').forEach(r=>{
    r.addEventListener('change',()=>{
      customRow.style.display = (r.value==='custom' && r.checked)?'flex':'none';
    });
  });
  document.querySelectorAll('input[name="pt"]').forEach(r=>{
    r.addEventListener('change',()=>{
      customProtRow.style.display = (r.value==='custom' && r.checked)?'flex':'none';
    });
  });

  function calc(){
    const sex = sexSel.value;
    const age = parseFloat(ageEl.value)||30;
    let cm, kg;
    if(unitSel.value==='imperial'){
      const ft = parseFloat(hft.value)||0; const inch = parseFloat(hin.value)||0;
      const totalIn = ft*12 + inch; cm = totalIn*2.54;
      const lb = parseFloat(weightEl.value)||0; kg = lb*0.453592;
    }else{
      cm = parseFloat(hcm.value)||0; kg = parseFloat(weightEl.value)||0;
    }

    // Mifflin-St Jeor
    const sConst = (sex==='male') ? 5 : -161;
    const bmr = (10*kg) + (6.25*cm) - (5*age) + sConst;

    const activity = parseFloat(actSel.value)||1.55;
    const maintenance = bmr * activity;

    const offsetPct = getGoal(); // +/-%
    const target = maintenance * (1 + offsetPct/100);

    // Macros
    // Convert to pounds for protein & fat settings
    const lbw = kg / 0.453592;
    const protPerLb = getProtPerLb();
    const p_g = protPerLb * lbw;
    const f_per_lb = parseFloat(document.getElementById('fatPerLb').value)||0.35;
    const f_g_min = Math.max(0, f_per_lb * lbw);

    const p_kcal = p_g * 4;
    const f_kcal = f_g_min * 9;
    let remaining = target - (p_kcal + f_kcal);
    if(remaining < 0){ remaining = 0; }
    const c_g = remaining / 4;

    // Fiber suggestion
    const fiber_g = (target/1000) * 14;

    // Render
    kcalEl.textContent = fmt(maintenance);
    bmrLine.textContent = `BMR: ${fmt(bmr)} • Activity x${activity}`;
    targetEl.textContent = fmt(target);
    goalLine.textContent = `Goal: ${offsetPct}% from maintenance`;

    pGr.textContent = `${fmt(p_g)} g`; pKcal.textContent = `${fmt(p_kcal)} kcal`;
    fGr.textContent = `${fmt(f_g_min)} g`; fKcal.textContent = `${fmt(f_kcal)} kcal`;
    cGr.textContent = `${fmt(c_g)} g`; cKcal.textContent = `${fmt(c_g*4)} kcal`;
    fiGr.textContent = `${fmt(fiber_g)} g`;
  }

  calcBtn.addEventListener('click', calc);
  // auto-calc on input changes
  document.querySelectorAll('input,select').forEach(el=>el.addEventListener('input', calc));
  // initial
  calc();
</script>
</body>
</html>